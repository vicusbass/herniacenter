---
import Logo from '../assets/logo.svg';
import MenuIcon from '../assets/menu.svg';
---

<header class="border-custom mt-4 border-b bg-white md:mt-0">
  <!-- Top navigation bar -->
  <nav class="relative max-w-full px-0">
    <div class="grid grid-cols-8">
      <div class="flex aspect-square items-center justify-center">
        <div class="flex h-12 w-12 items-center justify-center">
          <a href="/" class="block transition-transform duration-200 ease-in-out hover:scale-125">
            <Logo />
          </a>
        </div>
      </div>

      <!-- Desktop Navigation - Spans 6 columns with flex layout -->
      <div
        class="border-custom col-span-6 hidden items-center justify-evenly space-x-8 border-r border-l lg:flex"
      >
        <a
          href="/spital"
          class="rounded-md px-4 py-2 text-lg font-medium text-gray-800 transition-colors duration-200 hover:bg-gray-100 hover:text-blue-600 xl:text-xl 2xl:text-2xl"
          >Spitalul</a
        >
        <a
          href="/despre"
          class="rounded-md px-4 py-2 text-lg font-medium text-gray-800 transition-colors duration-200 hover:bg-gray-100 hover:text-blue-600 xl:text-xl 2xl:text-2xl"
          >Despre</a
        >
        <a
          href="/interventii"
          class="rounded-md px-4 py-2 text-lg font-medium text-gray-800 transition-colors duration-200 hover:bg-gray-100 hover:text-blue-600 xl:text-xl 2xl:text-2xl"
          >Intervenții</a
        >
        <a
          href="/blog"
          class="rounded-md px-4 py-2 text-lg font-medium text-gray-800 transition-colors duration-200 hover:bg-gray-100 hover:text-blue-600 xl:text-xl 2xl:text-2xl"
          >Blog</a
        >
        <a
          href="/contact"
          class="rounded-md px-4 py-2 text-lg font-medium text-gray-800 transition-colors duration-200 hover:bg-gray-100 hover:text-blue-600 xl:text-xl 2xl:text-2xl"
          >Contact</a
        >
      </div>

      <!-- Empty spaces for mobile - spans 6 columns -->
      <div class="col-span-6 lg:hidden"></div>

      <!-- Hamburger menu button -->
      <div class="border-custom flex aspect-square items-center justify-center">
        <button
          id="mobile-menu-toggle"
          class="flex h-12 w-12 items-center justify-center"
          aria-label="Toggle menu"
        >
          <MenuIcon />
        </button>
      </div>
    </div>
  </nav>
</header>

<!-- Full-screen Mobile Menu Modal -->
<div
  id="mobile-menu-modal"
  class="fixed inset-0 z-50 hidden bg-white"
  aria-labelledby="menu-title"
  role="dialog"
  aria-modal="true"
>
  <div class="relative flex h-full w-full flex-col items-center justify-center">
    <!-- Close Menu Button -->
    <button
      id="close-menu-button"
      class="absolute top-4 right-4 p-4 text-8xl font-bold text-gray-800 hover:text-gray-600"
      aria-label="Close menu"
    >
      &times;
    </button>

    <!-- Menu Content -->
    <div id="menu-content">
      <nav class="flex flex-col items-center space-y-8">
        <h2 id="menu-title" class="sr-only">Main Menu</h2>
        <a
          href="/spital"
          class="menu-item text-4xl font-medium text-gray-800 transition-colors duration-200 hover:text-blue-600"
          >Spitalul</a
        >
        <a
          href="/despre"
          class="menu-item text-4xl font-medium text-gray-800 transition-colors duration-200 hover:text-blue-600"
          >Despre Dr. Trif</a
        >
        <a
          href="/interventii"
          class="menu-item text-4xl font-medium text-gray-800 transition-colors duration-200 hover:text-blue-600"
          >Intervenții</a
        >
        <a
          href="/blog"
          class="menu-item text-4xl font-medium text-gray-800 transition-colors duration-200 hover:text-blue-600"
          >Blog</a
        >
        <a
          href="/contact"
          class="menu-item text-4xl font-medium text-gray-800 transition-colors duration-200 hover:text-blue-600"
          >Contact</a
        >
      </nav>
    </div>
  </div>
</div>

<style>
  .menu-item {
    opacity: 0;
    transform: translateY(20px);
    transition:
      opacity 0.4s ease-out,
      transform 0.4s ease-out;
  }

  .menu-item.visible {
    opacity: 1;
    transform: translateY(0);
  }
</style>

<script>
  function setupMenu() {
    const toggleButton = document.getElementById('mobile-menu-toggle');
    const closeButton = document.getElementById('close-menu-button');
    const modal = document.getElementById('mobile-menu-modal');
    const menuItems = document.querySelectorAll('.menu-item');

    const openMobileMenu = () => {
      if (modal) {
        modal.classList.remove('hidden');
        menuItems.forEach((item, index) => {
          setTimeout(
            () => {
              item.classList.add('visible');
            },
            (index + 1) * 50
          );
        });
      }
    };

    const closeMobileMenu = () => {
      if (modal) {
        modal.classList.add('hidden');
        menuItems.forEach((item) => {
          item.classList.remove('visible');
        });
      }
    };

    if (toggleButton) {
      toggleButton.addEventListener('click', openMobileMenu);
    }
    if (closeButton) {
      closeButton.addEventListener('click', closeMobileMenu);
    }
  }

  document.addEventListener('astro:page-load', setupMenu);
</script>
